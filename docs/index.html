<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.358">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Roux Sci-Comm Summer 2024 - Science Communication Crash Course</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Roux Sci-Comm Summer 2024</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#session-1" id="toc-session-1" class="nav-link active" data-scroll-target="#session-1">Session 1</a>
  <ul class="collapse">
  <li><a href="#the-and-but-therefore-method" id="toc-the-and-but-therefore-method" class="nav-link" data-scroll-target="#the-and-but-therefore-method">The “And, But, Therefore” Method</a></li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise">Exercise</a></li>
  <li><a href="#tips" id="toc-tips" class="nav-link" data-scroll-target="#tips">Tips</a></li>
  <li><a href="#for-next-week-86" id="toc-for-next-week-86" class="nav-link" data-scroll-target="#for-next-week-86">For next week (8/6)</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a>
  <ul class="collapse">
  <li><a href="#example-1" id="toc-example-1" class="nav-link" data-scroll-target="#example-1">Example 1:</a></li>
  <li><a href="#example-2-ai-takes-a-turn" id="toc-example-2-ai-takes-a-turn" class="nav-link" data-scroll-target="#example-2-ai-takes-a-turn">Example 2: AI takes a turn:</a></li>
  <li><a href="#example-3-rob-cavanaugh-roux-analyst" id="toc-example-3-rob-cavanaugh-roux-analyst" class="nav-link" data-scroll-target="#example-3-rob-cavanaugh-roux-analyst">Example 3: Rob Cavanaugh (Roux Analyst)</a></li>
  <li><a href="#example-4-dr.-chelsea-wong-md-t32-postdoctoral-fellow" id="toc-example-4-dr.-chelsea-wong-md-t32-postdoctoral-fellow" class="nav-link" data-scroll-target="#example-4-dr.-chelsea-wong-md-t32-postdoctoral-fellow">Example 4: Dr.&nbsp;Chelsea Wong, MD (T32 Postdoctoral Fellow)</a></li>
  <li><a href="#example-5-dr.-louisa-smith-roux-bouve---population-health" id="toc-example-5-dr.-louisa-smith-roux-bouve---population-health" class="nav-link" data-scroll-target="#example-5-dr.-louisa-smith-roux-bouve---population-health">Example 5: Dr.&nbsp;Louisa Smith (Roux, Bouve - Population Health)</a></li>
  <li><a href="#example-6-software-development" id="toc-example-6-software-development" class="nav-link" data-scroll-target="#example-6-software-development">Example 6: Software development</a></li>
  <li><a href="#dr.-paul-ayan-eai" id="toc-dr.-paul-ayan-eai" class="nav-link" data-scroll-target="#dr.-paul-ayan-eai">Dr.&nbsp;Paul Ayan (EAI)</a></li>
  <li><a href="#chloe-bennet-phd-student-population-health" id="toc-chloe-bennet-phd-student-population-health" class="nav-link" data-scroll-target="#chloe-bennet-phd-student-population-health">Chloe Bennet (PhD Student, Population Health)</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Science Communication Crash Course</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>

<section id="session-1" class="level1">
<h1>Session 1</h1>
<section id="the-and-but-therefore-method" class="level2">
<h2 class="anchored" data-anchor-id="the-and-but-therefore-method">The “And, But, Therefore” Method</h2>
<ul>
<li><p>Start the story with a few facts, setting out what the situation currently is.</p></li>
<li><p>Join these facts together with <strong>AND</strong></p></li>
<li><p>Then something happens (or a problem is identified).</p></li>
<li><p>Introducing the word <strong>BUT</strong> indicates that this is the start of the real story.</p></li>
<li><p>This then leads to the action of the story, <strong>THEREFORE</strong>, where you set out the consequences of this problem and what you are going to do about it.</p></li>
</ul>
</section>
<section id="exercise" class="level2">
<h2 class="anchored" data-anchor-id="exercise">Exercise</h2>
<ul>
<li>Write a bullets about your research using the “And, But, Therefore” method. Practice giving the pitch to yourself</li>
<li>Pair up with someone else and give your pitch to them. Give each other at least 1 positive feedback and 1 thing to improve</li>
<li>We’ll come back as a group and everyone will share their pitch with the group.</li>
</ul>
</section>
<section id="tips" class="level2">
<h2 class="anchored" data-anchor-id="tips">Tips</h2>
<p><strong>1. Consider your audience carefully</strong></p>
<p>When you read the following examples - you are the audience for these summaries. Do they include the key pieces of information you need to understand the research? Even if you don’t understand all of the terms used, do you get the gist of the project and why it’s important?</p>
<p>As you write your summary - who is your audience? What level of detail is appropriate, or necessary?</p>
<p><strong>2. Strive for balance between simplicity and detail. </strong></p>
<p>These examples have varied amounts of detail. Some are more technical, some are more general. What level of detail is best for your study?</p>
<p><strong>3. Avoid jargon, technical terms not everyone knows, and abbreviations when possible</strong></p>
<p>Jargon, technical terms, and abbreviations increase the work the audience has to do to understand your work. Not only do they need to digest something fairly complex, but you’re now also asking them to remember a new abbreviation or term.</p>
<p>If you need to use a sentence to explain what a technical idea or term is, that can be ok! Better than assuming the audience already knows what you’re talking about.</p>
<p><strong>4. When you’re done, step back and make sure your summary makes a step by step logical argument. </strong></p>
<p>Each new sentence needs to be supported by the previous ones and lead to the next sentence. If there is a break in the logic, it’s harder for the audience to follow and understand your study.</p>
<p><strong>5. Finally - read your paragraph <em>out loud</em> to yourself.</strong></p>
<p>It’s much easier to catch errors or sentences that don’t quite flow when you read it outloud. This keeps our brains from skipping over errors because we know what we meant to say.</p>
</section>
<section id="for-next-week-86" class="level2">
<h2 class="anchored" data-anchor-id="for-next-week-86">For next week (8/6)</h2>
<ul>
<li>Create your slide deck (ideally, no more than 5 slides).</li>
<li>Focus on diagrams, pictures, figures rather than words</li>
<li>Consider how you can use your “And, But, Therefore” pitch to introduce and previewq the talk for your audience.</li>
</ul>
</section>
<section id="examples" class="level2">
<h2 class="anchored" data-anchor-id="examples">Examples</h2>
<section id="example-1" class="level3">
<h3 class="anchored" data-anchor-id="example-1">Example 1:</h3>
<p>Epilepsy affects 600,000 people in the UK AND is often treated using anti-epileptic drugs. BUT for 30% of people with epilepsy these drugs fail to control their seizures. THEREFORE scientists are looking at new types of treatment which will work better.</p>
<p><em>What works, and what doesn’t?</em></p>
</section>
<section id="example-2-ai-takes-a-turn" class="level3">
<h3 class="anchored" data-anchor-id="example-2-ai-takes-a-turn">Example 2: AI takes a turn:</h3>
<p>The UK has a target to reduce carbon emissions by 80% by 2050 <strong>AND</strong> has made good progress in reducing emissions from electricity generation. <strong>BUT</strong> emissions from transport have not fallen. <strong>THEREFORE</strong> the government needs to take action to reduce emissions from cars and lorries.</p>
</section>
<section id="example-3-rob-cavanaugh-roux-analyst" class="level3">
<h3 class="anchored" data-anchor-id="example-3-rob-cavanaugh-roux-analyst">Example 3: Rob Cavanaugh (Roux Analyst)</h3>
<p>Of the 800,000 people who have a stroke in the US every year, one third are diagnosed with aphasia, a language disorder that impairs our ability to communicate with our friends, familiy, and colleagues. <strong>AND</strong> Speech-Language Pathologists use standardized tests to assess language abilities in people with aphasia <strong>BUT</strong> these tests are often too time-consuming for routine clinical care and contain out-of-date and culturally insensitive stimuli. <strong>THEREFORE</strong>, our study will use computational modeling and item-response theory to develop and validate an efficient, adpative, and culturally sensitive language assessment for today’s clinical practice.</p>
</section>
<section id="example-4-dr.-chelsea-wong-md-t32-postdoctoral-fellow" class="level3">
<h3 class="anchored" data-anchor-id="example-4-dr.-chelsea-wong-md-t32-postdoctoral-fellow">Example 4: Dr.&nbsp;Chelsea Wong, MD (T32 Postdoctoral Fellow)</h3>
<p>Older sexual and gender minority adults face a higher burden of frailty as well as mental health issues <strong>AND</strong> frailty and mental health issues are risk factors for the use of potentially inappropriate medications. BUT the prevalence of potentially inappropriate medications is unknown among older sexual and gender minority adults. <strong>THEREFORE,</strong> it is critical to evaluate the use and adverse outcomes of potentially inappropriate medication use particularly in this population. In my study, I am assessing whether older sexual and gender minorit adults use a higher prevalence of potentially inappropriate medications compared to cisgender heterosexual older adults.</p>
</section>
<section id="example-5-dr.-louisa-smith-roux-bouve---population-health" class="level3">
<h3 class="anchored" data-anchor-id="example-5-dr.-louisa-smith-roux-bouve---population-health">Example 5: Dr.&nbsp;Louisa Smith (Roux, Bouve - Population Health)</h3>
<p>Rural Maine has experienced a significant decline in obstetrics facilities, leading to decreased access to maternal healthcare. <strong>AND</strong> This decline is concerning as it correlates with poorer maternal and child health outcomes and increased travel times for essential care. <strong>BUT</strong> the challenges leading to rural obstetrics closures are not fully understood due to the diversity of the hospital settings. <strong>THEREFORE</strong>, we seek to identify key factors and develop targeted strategies to support and sustain the rural obstetrics workforce by conducting site visits and interviews with nurses, providers, and administrators at these locations.</p>
<p>Bisphosphonates are widely used to treat osteoporosis and other bone diseases, <strong>AND</strong> there is growing interest in their potential off-label effects, including the prevention of dementia. Observational studies have suggested a possible association between bisphosphonate use and reduced dementia risk, sparking significant scientific and public interest. <strong>BUT</strong> observational studies are prone to biases and confounding factors that can obscure the true causal relationship, making it challenging to determine whether bisphosphonates genuinely have a protective effect against dementia or if the observed associations are due to other factors. <strong>THEREFORE</strong> we are designing a target trial, which is the randomized controlled trial we would conduct in an ideal world, and will emulate it using observational data in order to rigorously assess the potential off-label effects of bisphosphonates on preventing dementia.</p>
<p>Maine’s newly enacted paid family and medical leave law will provide support for working mothers to take time off from work after the birth of a child. <strong>AND</strong> Similar policies in other states have been shown to improve maternal mental health, breastfeeding practices, and postpartum care attendance. <strong>BUT</strong> no states with significant rural populations have implemented such a leave policy, so we lack understanding of how its effects on maternal health may differ between urban and rural populations. This gap hinders the ability to tailor policies to meet the unique needs of diverse populations. <strong>THEREFORE</strong> we are collecting data by surveying people around the state in their first year postpartum before and after the law goes into effect in order to inform policymakers and stakeholders on the effectiveness and adaptability of paid leave policies for varied populations.</p>
</section>
<section id="example-6-software-development" class="level3">
<h3 class="anchored" data-anchor-id="example-6-software-development">Example 6: Software development</h3>
<p>The <em>All of Us</em> research program is a billion-dollar national effort to gather data from one million or more people living in the United States to accelerate research and precision medicine. The All of Us Research Program data is widely available to health researchers <strong>BUT</strong> using this data for complex research questions still requires a relatively high level of technical expertise, which poses a barrier to many researchers. <strong>THEREFORE,</strong> We developed the allofus R package to increase research and training capacity, reduce barriers to entry, and help researchers conduct complex analyses using best practices for reproducibility and transparency.</p>
</section>
<section id="dr.-paul-ayan-eai" class="level3">
<h3 class="anchored" data-anchor-id="dr.-paul-ayan-eai">Dr.&nbsp;Paul Ayan (EAI)</h3>
<p>The effective mitigation of the COVID-19 pandemic in the USA was challenged by unpredictable intervention outcomes due to a gap in integrating health, mobility, social behavior, and demographic data into models. <strong>AND</strong> Non-pharmaceutical interventions (NPIs) like lockdowns had adverse long-term effects and varied efficacy based on factors such as socioeconomic status (SES). <strong>BUT</strong> Current models either oversimplify transmission or lack socioeconomic factors, limiting their ability to understand the dynamics and effiveness of NPIs. <strong>THEREFORE</strong> we propose using detailed patient-level healthcare data and explainable AI (xAI) to better understand socioeconomic and behavioral predictors of disease spread. This approach will enhance Agent Based Models (ABMs), enabling more realistic simulations and effective mitigation strategies.</p>
</section>
<section id="chloe-bennet-phd-student-population-health" class="level3">
<h3 class="anchored" data-anchor-id="chloe-bennet-phd-student-population-health">Chloe Bennet (PhD Student, Population Health)</h3>
<p>Diabetes affects 1 in 10 adults in the U.S. <strong>AND</strong> continuous glucose monitors (CGMs) significantly improve diabetes outcomes. <strong>BUT</strong> not everyone who uses a CGM will necessarily benefit equally. <strong>THEREFORE</strong> my study will use the Target Trials framework to estimate the causal effect of CGM use on racial disparities in type 2 diabetes outcomes.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        console.log("RESIZE");
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>